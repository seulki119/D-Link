(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article"],{"2fa4":function(t,e,n){"use strict";n("20f6");var a=n("80d2");e["a"]=Object(a["e"])("spacer","div","v-spacer")},"3e3a":function(t,e,n){"use strict";var a=n("48b6"),o=n.n(a);o.a},"3e5b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("div",{staticClass:"overlay"},[t._v("로딩중")]):n("div",[n("v-card",{staticClass:"mx-auto pa-5",attrs:{"max-width":"600"}},[n("v-list-item",[n("v-list-item-avatar",{attrs:{color:"grey"}}),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.item.user.username))])],1),t.item.user.id==t.userId?n("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),a),[n("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3221905750)},[n("v-list",t._l(t.articleMenu,(function(e,a){return n("v-list-item",{key:a,on:{click:function(n){return t.clickMenu(e)}}},[n("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1):t._e()],1),n("v-img",{attrs:{src:"//127.0.0.1:8000/"+t.item.image,height:"300"}}),n("v-card-text",[n("div",{staticClass:"scrapInfo"},[t._v(" "+t._s(t.item.scrap.length)+" "),t.item.scrap.includes(t.userId)?n("img",{staticClass:"scrapInfo",attrs:{src:t.scrapSrc=t.scrapYes},on:{click:function(e){return t.scrapAct(t.item.id)}}}):n("img",{staticClass:"scrapInfo",attrs:{src:t.scrapSrc=t.scrapNo},on:{click:function(e){return t.scrapAct(t.item.id)}}})])]),n("v-card-text",{staticStyle:{color:"black"}},[t.readMoreActivated?t._e():n("span",[t._v(t._s(t.item.content.slice(0,45)))]),t.readMoreActivated?t._e():n("a",{staticStyle:{color:"gray"},on:{click:t.activateReadMore}},[t._v("...더보기")]),t.readMoreActivated?n("span",{domProps:{innerHTML:t._s(t.item.content)}}):t._e()]),n("v-card-text",[n("v-combobox",{staticClass:"pt-6",attrs:{multiple:"",chips:"",readonly:""},model:{value:t.hashtags,callback:function(e){t.hashtags=e},expression:"hashtags"}})],1),n("v-card-actions",[t.item.commentSet.length>0?n("v-btn",{attrs:{text:"",color:"deep-purple accent-4"},nativeOn:{click:function(e){t.show=!t.show}}},[t._v(" "+t._s(t.show?"댓글 접기":"댓글 "+t.item.commentSet.length+"개 모두 보기")+" ")]):t._e(),n("v-spacer")],1),t.item.commentSet.length>0&&""!=t.showComment.content?n("v-slide-y-transition",[n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}]},[n("v-list-item",[n("v-list-item-avatar",{attrs:{color:"grey"}}),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.showComment.username))]),n("v-list-item-subtitle",[t._v(" "+t._s(t.showComment.content)+" ")])],1)],1)],1)],1):t._e(),void 0!==t.item.commentSet&&t.item.commentSet.length>0?n("v-slide-y-transition",[n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},t._l(t.item.commentSet,(function(e,a){return n("v-list-group",{key:a,scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-avatar",{attrs:{color:"grey"}}),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.user.username))]),n("v-list-item-subtitle",[t._v(t._s(e.content))])],1)]},proxy:!0}],null,!0)},[void 0!==e.recommentSet?n("div",[n("comment-form",{attrs:{comments:e.recommentSet,itemUserId:t.item.user.id,userId:t.userId,commentId:e.id}})],1):t._e(),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.item.user.id==t.userId||e.user.id==t.userId,expression:"item.user.id == userId || comment.user.id == userId"}],attrs:{text:"",icon:"",color:"deep-purple accent-2"},on:{click:function(n){t.snackbar=!0,t.comm={id:e.id,username:e.user.username}}}},[n("v-icon",[t._v("mdi-dots-vertical")])],1),n("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-1"},on:{click:function(e){return t.deleteComment(t.comm.id)}}},"v-btn",a,!1),[t._v("삭제")]),n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-1"},on:{click:function(e){t.myComment="@"+t.comm.username+" ",t.modeComment=!1}}},"v-btn",a,!1),[t._v("댓글달기")]),n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-2"},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v("X")])]}}],null,!0),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.item.user.id!=t.userId&&e.user.id!=t.userId,expression:"item.user.id != userId && comment.user.id != userId"}],attrs:{text:"",icon:"",color:"deep-purple accent-2"},on:{click:function(n){t.snackbar2=!0,t.comm={id:e.id,username:e.user.username}}}},[n("v-icon",[t._v("mdi-dots-vertical")])],1),n("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-1"},on:{click:function(e){t.myComment="@"+t.comm.username+" ",t.modeComment=!1}}},"v-btn",a,!1),[t._v("댓글달기")]),n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-2"},on:{click:function(e){t.snackbar2=!1}}},"v-btn",a,!1),[t._v("X")])]}}],null,!0),model:{value:t.snackbar2,callback:function(e){t.snackbar2=e},expression:"snackbar2"}},[t._v(" "+t._s(t.text)+" ")])],1)})),1)],1):t._e(),n("v-card-actions",[n("v-avatar",{attrs:{color:"grey",size:"30px"}}),n("v-spacer"),n("v-textarea",{staticStyle:{width:"270px"},attrs:{"auto-grow":"",outlined:"",filled:"",rows:"1","row-height":"15",placeholder:t.userName+" 님의 댓글",modeComment:t.modeComment,"append-icon":"mdi-comment"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.modeComment?t.createComment():t.createRecomment()}},model:{value:t.myComment,callback:function(e){t.myComment=e},expression:"myComment"}})],1)],1)],1)},o=[],s=(n("99af"),n("d3b7"),n("5530")),i=n("2f62"),c=n("c21c"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[void 0!==t.comments&&t.comments.length>0?n("v-slide-y-transition",[n("v-card-text",t._l(t.comments,(function(e,a){return n("v-list-item",{key:a},[null!=e.content&&" "!=e.content?n("v-list-item-avatar",{attrs:{color:"grey"}}):t._e(),null!=e.content&&" "!=e.content?n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.user.username))]),n("v-list-item-subtitle",[t._v(t._s(e.content))])],1):t._e(),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.itemUserId==t.userId||e.user.id==t.userId,expression:"itemUserId == userId || comment.user.id == userId"}],attrs:{text:"",icon:"",color:"deep-purple accent-2"},on:{click:function(n){t.snackbar=!0,t.comm={id:e.id,username:e.user.username,index:a}}}},[n("v-icon",[t._v("mdi-dots-vertical")])],1),n("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-1"},on:{click:function(e){return t.deleteComment(t.comm.id,t.comm.index)}}},"v-btn",a,!1),[t._v("삭제")]),n("v-btn",t._b({attrs:{text:"",color:"deep-purple accent-2"},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v("X")])]}}],null,!0),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)})),1)],1):t._e()],1)},m=[],l=(n("a434"),n("a9e3"),{props:{comments:{type:Array,default:function(){return{}}},itemUserId:Number,userId:Number,commentId:Number},data:function(){return{show:!1,comm:{id:"",username:"",index:""},timeout:2e3,text:"댓글 기능 텍스트",snackbar:!1}},created:function(){console.log(this.comments)},beforeUpdate:function(){console.log("up")},methods:{deleteComment:function(t,e){var n=this;console.log(t);var a=localStorage.getItem("token"),o={headers:{Authorization:"Token ".concat(a)}};c["a"].delete("/articles/comment/".concat(this.commentId,"/recomment/").concat(t,"/"),o).then((function(t){console.log(t),n.snackbar=!1,n.comments.splice(e,1)})).catch((function(t){console.log(t.response)}))}}}),u=l,d=n("2877"),v=n("6544"),h=n.n(v),p=n("8336"),b=n("99d9"),f=n("132d"),g=n("da13"),k=n("8270"),_=n("5d23"),y=n("0789"),C=(n("caad"),n("ade3")),w=(n("ca71"),n("8dd9")),x=n("a9ad"),I=n("7560"),S=n("f2e7"),A=n("fe6c"),V=n("58df"),T=n("80d2"),O=n("d9bd"),j=Object(V["a"])(w["a"],x["a"],S["a"],Object(A["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(t){return"string"===typeof t||!1===t}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:I["a"].options.computed.isDark.call(this)},styles:function(){if(this.absolute)return{};var t=this.$vuetify.application,e=t.bar,n=t.bottom,a=t.footer,o=t.insetFooter,s=t.left,i=t.right,c=t.top;return{paddingBottom:Object(T["d"])(n+a+o),paddingLeft:this.app?Object(T["d"])(s):void 0,paddingRight:this.app?Object(T["d"])(i):void 0,paddingTop:Object(T["d"])(e+c)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(O["e"])("auto-height",this),0==this.timeout&&Object(O["d"])('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(T["l"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:Object(C["a"])({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[Object(T["l"])(this)])},genWrapper:function(){var t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:w["a"].options.computed.classes.call(this),directives:[{name:"show",value:this.isActive}]});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout);var e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),e))}},render:function(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}}),$=Object(d["a"])(u,r,m,!1,null,null,null),L=$.exports;h()($,{VBtn:p["a"],VCardText:b["b"],VIcon:f["a"],VListItem:g["a"],VListItemAvatar:k["a"],VListItemContent:_["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VSlideYTransition:y["e"],VSnackbar:j});var B={components:{CommentForm:L},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["c"])(["item"])),Object(i["c"])(["userId"])),Object(i["c"])(["userName"])),data:function(){return{loading:!1,scrapSrc:"",scrapNo:"https://img.icons8.com/carbon-copy/24/000000/wine-glass.png",scrapYes:"https://img.icons8.com/plasticine/24/000000/wine-glass.png",readMoreActivated:!1,show:!1,showComment:{username:"",content:""},myComment:"",snackbar:!1,snackbar2:!1,timeout:2e3,text:"댓글 기능 텍스트",hashtags:[],articleMenu:["수정","삭제"],comm:{id:"",username:""},modeComment:!0}},watch:{myComment:function(){""==this.myComment&&(this.modeComment=!0)}},created:function(){var t=this;this.loading=!0,this.$store.dispatch("getArticle","/articles/".concat(this.$route.query.id)).finally((function(){setTimeout((function(){var e=t.item.commentSet;if(void 0!==e)for(var n=0;n<e.length;n++){if(e[n].user.id===t.userId){t.showComment.username=e[n].user.username,t.showComment.content=e[n].content;break}n==e.length-1&&(t.showComment.username=e[n].user.username,t.showComment.content=e[n].content)}for(var a=t.item.hashtag,o=[],s=0;s<a.length;s++)o.push(a[s].tag);t.hashtags=o,t.loading=!1}),400)}))},methods:{scrapAct:function(t){this.$store.dispatch("doScrap",{url:"/articles/".concat(t,"/scrap"),page:"article",id:"".concat(t)})},activateReadMore:function(){this.readMoreActivated=!0},createComment:function(){var t=this,e=localStorage.getItem("token"),n={headers:{Authorization:"Token ".concat(e)}},a=new FormData;a.append("user",this.userId),a.append("content",this.myComment),c["a"].post("/articles/".concat(this.item.id,"/comment/"),a,n).then((function(e){console.log(e),t.$store.dispatch("getArticle","/articles/".concat(t.$route.query.id)),t.myComment=""})).catch((function(t){console.log(t)}))},deleteComment:function(t){var e=this;console.log(t);var n=localStorage.getItem("token"),a={headers:{Authorization:"Token ".concat(n)}};c["a"].delete("/articles/".concat(this.item.id,"/comment/").concat(t,"/"),a).then((function(t){console.log(t),e.snackbar=!1,e.$store.dispatch("getArticle","/articles/".concat(e.$route.query.id))})).catch((function(t){console.log(t.response)}))},clickMenu:function(t){var e=this;if("수정"!=t){var n=localStorage.getItem("token"),a={headers:{Authorization:"Token ".concat(n)}};c["a"].delete("/articles/".concat(this.item.id),a).then((function(t){alert(t.data.message),e.$router.push("mypage")})).catch((function(t){alert(t.data.message)}))}},createRecomment:function(){var t=this;console.log(this.comm.id+" "+this.comm.username);var e=localStorage.getItem("token"),n={headers:{Authorization:"Token ".concat(e)}},a=new FormData;a.append("user",this.userId),a.append("content",this.myComment),c["a"].post("/articles/comment/".concat(this.comm.id,"/recomment/"),a,n).then((function(e){console.log(e),t.$store.dispatch("getArticle","/articles/".concat(t.$route.query.id)),t.myComment=""})).catch((function(t){console.log(t.data)}))}}},N=B,M=(n("3e3a"),n("8212")),E=n("b0af"),z=n("2b5d"),R=n("adda"),U=n("8860"),q=n("56b0"),D=n("e449"),F=n("2fa4"),Y=n("a844"),W=Object(d["a"])(N,a,o,!1,null,"3fa56081",null);e["default"]=W.exports;h()(W,{VAvatar:M["a"],VBtn:p["a"],VCard:E["a"],VCardActions:b["a"],VCardText:b["b"],VCombobox:z["a"],VIcon:f["a"],VImg:R["a"],VList:U["a"],VListGroup:q["a"],VListItem:g["a"],VListItemAvatar:k["a"],VListItemContent:_["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VMenu:D["a"],VSlideYTransition:y["e"],VSnackbar:j,VSpacer:F["a"],VTextarea:Y["a"]})},"48b6":function(t,e,n){},ca71:function(t,e,n){}}]);
//# sourceMappingURL=article.59c979eb.js.map